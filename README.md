Backend-—Å–µ—Ä–≤–∏—Å –¥–ª—è pet-–ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Gin, PostgreSQL –∏ JWT.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (clients –∏ masters), —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é. –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ REST API, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ PostgreSQL –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îú‚îÄ‚îÄ server/       # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ migrate/      # —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handler/      # HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ service/      # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ repository/   # —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ model/        # —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ migrations/       # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .env.example      # –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Go ‚Äî —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

Gin ‚Äî HTTP-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫

PostgreSQL ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLX ‚Äî —É–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å SQL –≤ Go

JWT ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

Go modules ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/KoltunEvgeniy/petBackEnd.git
cd petBackEnd

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=secret
DB_NAME=petback
JWT_SECRET=supersecretkey
PORT=8080

3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod download

4. –ó–∞–ø—É—Å–∫–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏
go run cmd/migrate/main.go up

5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
go run cmd/server/main.go


–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080

API —Ä–æ—É—Ç—ã 
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã /auth –æ—Ç–∫—Ä—ã—Ç—ã–µ, JWT –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è:

POST /auth/login ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ SMS –¥–ª—è –ª–æ–≥–∏–Ω–∞

POST /auth/verify ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∏–∑ SMS

POST /auth/refresh ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

–ê–¥–º–∏–Ω—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ /admin

Middleware: UserIndentity, RequereRole("admin")

–ö–ª–∏–µ–Ω—Ç—ã /admin/client

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

PATCH /:id ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ master

–°–µ—Ä–≤–∏—Å—ã /admin/services

POST / ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–ú–∞—Å—Ç–µ—Ä–∞ /master

Middleware: UserIndentity, RequereRole("master")

–ü—Ä–æ—Ñ–∏–ª—å /master/me

POST / ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –º–∞—Å—Ç–µ—Ä–∞

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –º–∞—Å—Ç–µ—Ä–∞

–°–µ—Ä–≤–∏—Å—ã /master/me/services

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

POST /my/ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å –º–∞—Å—Ç–µ—Ä—É

GET /my/ ‚Äî —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –º–∞—Å—Ç–µ—Ä–∞

DELETE /my/:id ‚Äî —É–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å –º–∞—Å—Ç–µ—Ä–∞

–ó–∞–ø–∏—Å–∏ /master/me/appointments

GET / ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞

–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å /master/me/availability

POST / ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–∞—Å—Ç–µ—Ä–∞

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–∞—Å—Ç–µ—Ä–∞

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ /master/me/schedule

POST / ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–∞

–°–ª–æ—Ç—ã /master/me/slots

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ª–æ—Ç—ã –º–∞—Å—Ç–µ—Ä–∞

–ö–ª–∏–µ–Ω—Ç—ã /client

Middleware: UserIndentity, RequereRole("client")

–ú–∞—Å—Ç–µ—Ä–∞ /client/master

GET / ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Å—Ç–µ—Ä–æ–≤

GET /:id/availability ‚Äî –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–∞—Å—Ç–µ—Ä–∞

GET /:id/slots ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ª–æ—Ç—ã –º–∞—Å—Ç–µ—Ä–∞

–ü—Ä–æ—Ñ–∏–ª—å /client/me

POST / ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞

–ó–∞–ø–∏—Å–∏ /client/me/appointments

POST / ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å

GET / ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –∫–ª–∏–µ–Ω—Ç–∞

–ü–ª–∞—Ç–µ–∂–∏ /client/me/appointments/:id/payments

POST / ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂

GET / ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π

–°–∫—Ä—ã—Ç—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–æ–ª–∏

POST /client/admn ‚Äî —Å–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –Ω–∞ admin

POST /client/mstr ‚Äî —Å–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –Ω–∞ master

JWT –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

Authorization: Bearer <JWT_TOKEN>


JWT —Ç–æ–∫–µ–Ω –≤—ã–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ª–æ–≥–∏–Ω–µ.

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

go test ./...